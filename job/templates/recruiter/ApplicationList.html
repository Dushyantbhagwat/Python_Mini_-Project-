<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
  <head>
    {% load static %}
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
<!--    <script src="{% static 'style/script.js' %}"></script>-->
    <link rel="stylesheet" href="{% static 'style/recruiter/ALGlobal.css' %}" />
    <link rel="stylesheet" href="{% static 'style/recruiter/ApplicationList.css' %}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;700&display=swap"
    />

    <style>
      .frame-item {
        border: 1px solid black; /* Add border to create a rectangular box */
        border-radius: 5px; /* Add border radius for rounded corners */
        padding: 3px 0px; /* Add padding for better appearance */
        height: 50px;
        width: 154px;
      }
      .frame-parent1 {
        position: relative; /* Positioning context for the button */
      }

      .dropdown {
        position: absolute;
        top: -3px;
        right: 400px; /* Aligns the right edge of the dropdown with the right edge of the parent container */
        width: -120px;
      }

      .dropdown-menu {
        display: none;
      }

      .dropdown-menu.show {
        display: block;
      }
      .dropdown-menu {
          display: none;
          position: absolute;
          right: -425px; /* Aligns the right edge of the dropdown with the right edge of the button */
          top: 10px; /* Aligns the top edge of the dropdown with the top edge of the button */
      }

      .dropdown-menu.show {
          display: block;
      }

      .dropdown-box {
        border: 1px solid black; /* Black border */
        padding: 5px; /* Add padding */
        display: inline-block; /* Display boxes horizontally */
        margin-right: -8px; /* Add margin between boxes */
        height: 34px;
      }

      .dropdown-item {
        text-decoration: none; /* Remove default link underline */
        color: black; /* Black text color */
      }

      .dropdown-item:hover {
         border-color: #333; /* Darken border color on hover */
      }

    </style>

    <style>
      .custom-dropdown {
        position: relative;
        display: inline-block;
      }

      .custom-dropdown select {
        padding: 10px;
        font-size: 16px;
        border: none;
        border-radius: 5px;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background-color: #f2f2f2;
        cursor: pointer;
        width: 190px;
        height: 45px;
        position: relative;
        top: 2px;
      }

      .custom-dropdown select:focus {
        outline: none;
      }

      /* Style for dropdown arrow */
      .custom-dropdown::after {
        content: '\25BC';
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
      }

      /* Style for dropdown options */
      .custom-dropdown option {
        background-color: #fff;
        color: #000;
      }

      .custom-dropdown option:hover {
        background-color: #f2f2f2;
      }


    </style>








    <style>
      .column-names-container,
      .job-seekers-container {
        margin-bottom: 20px;


      }
      .column-names-box {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        margin-bottom: 8px; /* Decrease margin */
        border: 1px solid #ccc;
        border-radius: 3px;
        background-color: var(--color-white);
        height: 40px;
      }
      .column-name {
        flex: 1;
        text-align: center;
      }

      .shifted {
        position: relative;
        left: -33px;
      }
      .shifted2 {
        position: relative;
        left: -56px;
      }
      .shifted3 {
        position: relative;
        left: -12px;
      }
      .shifted4 {
        position: relative;
        left: 19px;
      }
      .shifted5 {
        position: relative;
        left: 63px;
      }
      .shifted6 {
        position: relative;
        left: 1px;
      }
      .shifted7 {
        position: relative;
        left: -23px;
      }
      .shifted8 {
        position: relative;
        left: -5px;
      }
      /* Example individual styling */
      .column-name:nth-child(1) {
        margin-left: -40px; /* Adjust the value as needed */
      }
      .column-name:nth-child(2) {
        margin-right: -40px; /* Adjust the value as needed */
      }
      .column-name:nth-child(3) {
        margin-left: 30px; /* Adjust the value as needed */
      }
      .column-name:nth-child(4) {
        margin-left: 30px; /* Adjust the value as needed */
      }
      .column-name:nth-child(5) {
        margin-left: 30px; /* Adjust the value as needed */
      }
      .column-name:nth-child(6) {
        margin-left: 30px; /* Adjust the value as needed */
      }
      .column-name:nth-child(7) {
        margin-left: 30px; /* Adjust the value as needed */
      }




      .job-seeker-row {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-top: 5px;
      }

      /* Styles for the delete button */
      .delete {
        background-color: #ff6347; /* Red background */
        color: #fff; /* White text color */
        border: none; /* Remove border */
        padding: 8px 16px; /* Add padding */
        border-radius: 5px; /* Add border radius */
        cursor: pointer; /* Add pointer cursor on hover */
        transition: background-color 0.3s ease; /* Smooth transition */
        left: -50px;
        width: 60px;
        height: 35px;
      }

      .delete:hover {
        background-color: #d9534f; /* Darker red background on hover */
      }

      /* Center the delete button */
      .job-seeker-row {
        display: flex;
        justify-content: space-between;
        align-items: center; /* Center vertically */
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-top: 5px;
      }

      /* Apply background colors to alternate rows */
      .job-seeker-row:nth-child(even) {
        background-color: var(--color-white);
        color: var(--color-black);
        background: linear-gradient(180deg, rgba(186, 188, 224, 0), #badbe0);
        box-sizing: border-box;
      }

      .job-seeker-row:nth-child(odd) {
        background-color: var(--color-gainsboro);
        color: var(--color-black);
        background: linear-gradient(180deg, #badbe0, rgba(186, 188, 224, 0));
        box-sizing: border-box;
      }


    </style>










  </head>
  <body>
    <div class="application-list">
      <img
        class="application-list-child"
        alt=""
        src="{% static 'style/recruiter/rectangle-2.svg' %}"
      />

      <div class="application-list-item"></div>
      <div class="application-list-inner"></div>
      <div class="nav-wrapper">
        <div class="nav">
          <div class="nav-child"></div>
          <div class="nav-bar">
            <div class="rectangle-parent">
               <a href="{% url 'candidate_list' job_id %}" style="text-decoration: none;"><img
                class="frame-child"
                loading="lazy"
                alt=""
                src="{% static 'images/rectangle-22@2x.png' %}"
               /></a>

              <div class="frame-wrapper">
                <div class="frame-parent">
                  <div class="recruiters-list-parent">
                    <div class="recruiters-list">

                     
                      <a href="{% url 'r_landing_page' %}" style="text-decoration: none;"><button  class="recruiters-list-child">
                        <div class="home">Home</div>
                        
                      </button></a>
                   
                    </div>
                  </div>
                  <div class="frame-container">
                    <a href="{% url 'candidate_list' job_id %}" style="text-decoration: none;"><button class="applications-btn-parent">
                      <div class="applications-btn"></div>
                      <div class="applications">Applications</div>
                    </button></a>
                  </div>
                  <a href="{% url 'post_jobs' %}" style="text-decoration: none;"><button class="recruiter-btn">
                    <div class="recruiter-btn-child"></div>
                    <div class="recruiters">Add Job</div>
                  </button></a>
                </div>
              </div>
            </div>
          </div>
          
          <button class="nav-item">
            <img
            class="material-symbolshome-icon"
            loading="lazy"
            alt=""
            src="{% static 'style/recruiter/materialsymbolshome.svg' %}"
          />
          </button>
        </div>
      </div>
      <div class="frame-div">

       <div class="frame-group">
          <div class="frame-parent1">
            <div class="dropdown">
              <button class="frame-item dropdown-toggle" type="button" id="dropdownMenuButton" onclick="toggleDropdown()" aria-haspopup="true" aria-expanded="false">
                <div class="excel-wrapper">
                  <div class="excel">Actions</div>
                </div>
              </button>
              <div class="dropdown-menu" id="dropdownMenu" aria-labelledby="dropdownMenuButton">
                <div class="dropdown-box">
                  <a class="dropdown-item" href="{% url 'pending_candidate_list' job_id %}">Pending</a>
                </div>
                <div class="dropdown-box">
                  <a class="dropdown-item" href="{% url 'accepted_candidate_list' job_id %}">Accepted</a>
                </div>
                <div class="dropdown-box">
                  <a class="dropdown-item" href="{% url 'rejected_candidate_list' job_id %}">Rejected</a>
                </div>
              </div>
            </div>
          </div>
       </div>

        <script>
          function toggleDropdown() {
            var dropdownMenu = document.getElementById("dropdownMenu");
            dropdownMenu.classList.toggle("show");
          }
        </script>


          <input type="search" class="search" name="search" id="searchInput" placeholder="SEARCH....">
              
              <div class="search-child"></div>
              <div class="search-fill0-wght400-grad0-ops-wrapper">

              </div>

               <div class="search-results"></div>

              
        
          </div>
        </div>
      </div>

            <div class="column-names-container">
              <div class="column-names-box">
                <div class="column-name shifted">SR.N0</div>
                <div class="column-name shifted2">Name</div>
                <div class="column-name shifted3">Contact</div>
                <div class="column-name shifted4">Email ID</div>
                <div class="column-name shifted5">Gender</div>
                <div class="column-name shifted6">Resume</div>
                <div class="column-name shifted7">Image</div>
                <div class="column-name shifted8">Action</div>
              </div>
            </div>

            <div class="job-seekers-container">
          {% for app in apps %}
          <div class="job-seeker-row">
            <div>{{ forloop.counter }}</div>
            <div>{{ app.user.full_name }}</div>
            <div>{{ app.user.mobile_no }}</div>
            <div>{{ app.user.email_id }}</div>
            <div>{{ app.user.gender }}</div>
            <div><a href="{{ app.user.resume.url }}" download>Resume</a></div>
            <div>
              {% if app.user.image %}
              <img class="ellipse-icon" loading="lazy" alt="" src="{{ app.user.image.url }}" />
              {% else %}
              <img class="ellipse-icon" loading="lazy" alt="" src="{% static 'images/profile pic.jpg' %}" />
              {% endif %}
            </div>
            <div>
              {% if app.status == 'Pending' %}
               <div>
                    <a href="{% url 'applications' app.id %}"  class="next">Job Details</a><br>
                    <a href=""  onclick="accept({{ app.id }})" class="acc">Accept</a>
                    <a href="" onclick="reject({{ app.id }})" class="rej">Reject</a>
               </div>
              {% elif app.status == 'Accepted' %}
               <div>
                 <a class="reason" onclick="showReasonPrompt('{{ app.reason }}')">
                      <p class="acc">Accepted</p>
                 </a>
               </div>

              {% elif app.status == 'Rejected' %}
               <div>
                 <a class="reason" onclick="showReasonPrompt('{{ app.reason }}')">
                   <p  class="rej">Rejected</p>
                 </a>
               </div>
            {% endif %}

            </div>
          </div>
          {% endfor %}
        </div>

      </main>
    </div>

    <script>
          function showReasonPrompt(reason) {
        if (reason) {
            alert('Reason for rejection:\n' + reason);
        } else {
            alert('Reason was not provided for rejection.');
        }
    }

    </script>

    <script>

        function accept(id) {
            var reason = prompt('Please provide a reason for accepting (optional):');
            if (confirm('Are you sure you want to accept this candidate?')) {
                // If user confirms, proceed with acceptance
                $.ajax({
                    type: 'POST',
                    url: '{% url "action" %}',
                    data: {
                        'id': id,
                        'status': 'Accepted',
                        'reason': reason, // Pass the reason to the backend
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function () {
                        // Update UI or perform any additional actions after accepting
                        alert('Candidate Accepted Successfully');
                    },
                    error: function () {
                        // Handle errors if any
                        alert('Error occurred while accepting the candidate');
                    }
                });
            }
        }


        function reject(id) {
              var reason = prompt('Please provide a reason for rejecting (optional):');
              if (confirm('Are you sure you want to reject this candidate?')) {
                  // If user confirms, proceed with rejection
                  $.ajax({
                      type: 'POST',
                      url: '{% url "action" %}',
                      data: {
                          'id': id,
                          'status': 'Rejected',
                          'reason': reason, // Pass the reason to the backend
                          'csrfmiddlewaretoken': '{{ csrf_token }}'
                      },
                      success: function () {
                          // Update UI or perform any additional actions after rejecting
                          alert('Candidate Rejected Successfully');
                      },
                      error: function () {
                          // Handle errors if any
                          alert('Error occurred while rejecting the candidate');
                      }
                  });
              } else {
                  // If user cancels, redirect to some page
                  window.location.href = '{% url "action" %}';
              }
          }

    </script>


    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var searchInput = document.getElementById("searchInput");
            var jobSeekerRows = document.querySelectorAll(".job-seeker-row");

            searchInput.addEventListener("input", function() {
                var searchText = searchInput.value.trim().toLowerCase();

                jobSeekerRows.forEach(function(row) {
                    var id = row.children[0].textContent.toLowerCase(); // ID
                    var fullName = row.children[1].textContent.toLowerCase(); // Assuming Full Name is in the second column
                    var mobileNo = row.children[2].textContent.toLowerCase(); // Mobile No
                    var email = row.children[3].textContent.toLowerCase(); // Email ID
                    var gender = row.children[4].textContent.toLowerCase(); // Gender
                    var action = row.children[7].textContent.toLowerCase(); // Action


                    // Add more conditions as needed
                    if (
                        id.includes(searchText) ||
                        fullName.includes(searchText) ||
                        mobileNo.includes(searchText) ||
                        email.includes(searchText) ||
                        gender.includes(searchText) ||
                        action.includes(searchText)
                    ) {
                        row.style.display = "flex"; // Show the row if any condition matches
                    } else {
                        row.style.display = "none"; // Hide the row if no condition matches
                    }
                });
            });
        });
    </script>





    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>


    <script>
      $(document).ready(function() {
        {% for message in messages %}
        var messageType = "{{ message.tags }}"
        var messageText = "{{ message }}"

        toastr.options = {
          closeButton: true,
          progressBar: true,
          positionClass: 'toast-bottom-right',
          showMethod: 'slideDown',
          timeout: 5000
        };

        if (messageType === 'success') {
          toastr.success(messageText);
        } else if (messageType === 'error') {
          toastr.error(messageText);
        } else if (messageType === 'info') {
          toastr.info(messageText);
        } else {
          toastr.warning(messageText);
        }
        {% endfor %}
      });
    </script>
</style>


  </body>
</html>
